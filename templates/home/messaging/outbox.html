{% extends "base/base_home.html" %}
{% load static %}
{% block style %}
    {{ block.super }}
    <link rel="stylesheet" href = "{% static "css/messages.css" %}"/>
{% endblock %}

{% block user_content %}

    <a href = '{% url "sections.messaging.views.compose" %}' class = 'nav_link'> New Message </a>
    <a href = '{% url "sections.messaging.views.messaging" %}' class = 'nav_link'>Inbox</a>

    <table>
        <thead>
            <tr>
                <th scope="col"> Action </th>
                <th scope="col"> Subject </th>
                <th scope="col"> To </th>
                <th scope="col">Preview</th>
                <th scope = "col">Date Sent</th>

            </tr>
        </thead>
        <tbody>
    {% for msg in messages %}
        <tr
              {% if not msg.viewed %}
               class = "unread"
               {% endif %}
        >
            <td><a href="{% url "sections.messaging.views.view"  msg.id  %}">View  </a>
            <a href="{% url "sections.messaging.views.compose"%}">Reply  </a>
            <a href="{% url "sections.messaging.views.delete" msg.id %} "> Delete </a>

            </td>
            <td class = "subject"> {{ msg.subject }} </td>
            <td><a href='/home/user_profile?userId={{ msg.receiver.id }}'>{{ msg.receiver.username }}</a></td>
            <td> {{ msg.content|truncatechars:80 }}</td>
            <td> {{ msg.date_sent }}</td>

        </tr>
        {% empty %}
            <tr><td colspan="5"> There are no messages ! </td></tr>
    {% endfor %}
        </tbody>
    </table>

{% endblock %}
